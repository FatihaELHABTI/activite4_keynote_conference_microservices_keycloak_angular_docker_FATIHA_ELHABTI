<div class="glass-container" *ngIf="conference">

  <!-- Bouton Retour -->
  <a routerLink="/conferences" class="btn-custom" style="margin-bottom: 20px; background: #999; padding: 8px 15px; font-size: 0.9em;">
    â¬… Retour
  </a>

  <!-- En-tÃªte ConfÃ©rence -->
  <div style="border-bottom: 1px solid #ddd; padding-bottom: 20px; margin-bottom: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: start;">
      <h1 style="margin: 0; color: var(--primary-color);">{{ conference.titre }}</h1>
      <span class="badge" [ngStyle]="{'background': conference.type === 'Academique' ? '#3498db' : '#27ae60'}"
            style="color: white; padding: 5px 10px; border-radius: 5px;">
        {{ conference.type }}
      </span>
    </div>

    <div style="margin-top: 15px; color: #555;">
      <p>ğŸ“… Date : <strong>{{ conference.date | date:'fullDate' }}</strong></p>
      <p>â± DurÃ©e : <strong>{{ conference.duree }} minutes</strong></p>
      <p>ğŸ¤ Speaker :
        <strong *ngIf="conference.keynote">{{ conference.keynote.prenom }} {{ conference.keynote.nom }}</strong>
        <span *ngIf="!conference.keynote" style="color: red;">Non assignÃ©</span>
      </p>
    </div>
  </div>

  <!-- Section Avis -->
  <h3>ğŸ“ Avis et Commentaires ({{ conference.reviews ? conference.reviews.length : 0 }})</h3>

  <!-- Liste des avis existants -->
  <div style="max-height: 400px; overflow-y: auto; margin-bottom: 30px;">

    <div *ngFor="let r of conference.reviews"
         style="background: rgba(255,255,255,0.6); padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--primary-color);">
      <div style="display: flex; justify-content: space-between;">
        <div style="color: #f39c12; font-size: 1.2em;">
          {{ 'â˜…'.repeat(r.stars) }}<span style="color: #ccc;">{{ 'â˜…'.repeat(5 - r.stars) }}</span>
        </div>
        <small style="color: #888;">{{ r.date | date }}</small>
      </div>
      <p style="margin: 5px 0; font-style: italic;">"{{ r.texte }}"</p>
    </div>

    <div *ngIf="!conference.reviews || conference.reviews.length === 0" style="color: #777; text-align: center; padding: 20px;">
      Aucun avis pour le moment. Soyez le premier Ã  donner votre opinion !
    </div>

  </div>

  <!-- Formulaire d'ajout d'avis -->
  <div style="background: #f8f9fa; padding: 20px; border-radius: 15px; border: 1px solid #eee;">
    <h4 style="margin-top: 0;">Laisser un avis</h4>

    <div style="margin-bottom: 15px;">
      <label style="display: block; margin-bottom: 5px;">Note :</label>
      <select [(ngModel)]="newReview.stars" class="input-custom" style="width: 150px;">
        <option [ngValue]="5">5 â˜…â˜…â˜…â˜…â˜… (Excellent)</option>
        <option [ngValue]="4">4 â˜…â˜…â˜…â˜… (TrÃ¨s bien)</option>
        <option [ngValue]="3">3 â˜…â˜…â˜… (Moyen)</option>
        <option [ngValue]="2">2 â˜…â˜… (Bof)</option>
        <option [ngValue]="1">1 â˜… (Mauvais)</option>
      </select>
    </div>

    <div style="margin-bottom: 15px;">
      <label style="display: block; margin-bottom: 5px;">Commentaire :</label>
      <textarea [(ngModel)]="newReview.texte" class="input-custom" rows="3" placeholder="Qu'avez-vous pensÃ© de cette confÃ©rence ?"></textarea>
    </div>

    <button class="btn-custom" (click)="submitReview()">Publier mon avis</button>
  </div>

</div>
